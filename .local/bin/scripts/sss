#!/bin/sh

dir="$HOME/img/ss"
mkdir -p "$dir"

timestamp="$(date +'%Y-%m-%d_%H-%M-%S')"
randhex="$(openssl rand -hex 10)"

filename="$randhex-$timestamp"

file="$dir/$filename.png"

if [ "${XDG_SESSION_TYPE:-}" = "wayland" ]; then
    grim -g "$(slurp)" "$file" && wl-copy < "$file"
else
    maim -s "$file" && xclip -selection clipboard -t image/png -i "$file" &
fi
